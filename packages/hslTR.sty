%******************************************************************************
%
% Source: http://intra.ees.kth.se/lathundar/mallar/latex-1.65629?l=en_UK
% Original file name: hslTR.sty
% Modified by: Rares Vernica <rares (at) ics.uci.edu>
% Date: 2011-02-01
%
%******************************************************************************

%******************************************************************************
%
% DESCRIPTION: Style file to add a title page for masters thesis,
%              licentiate, doctoral thesis and internal reports
%              according to the central KTH design, but with a EE
%              logo.
%%
% OPTIONS:
%       forPrint:       Gives a titlepage in black and white
%                       (without any logo for the thesis formats)
%       forWWW:         Gives titlepage in color with logo, intended
%                       for web publishing.
%       ireport:        Internal report
%       
%       Default is exjobb, eng and forWWW.
%
% COMMANDS:    \ititle{}, \isubtitle{}, idate{}, \irefnr{}, \iaddress{}
%              and \makeititle.
%
% USAGE:       \usepackage{hslTR},
%              \begin{document}
%                \ititle{My Title}
%                \isubtitle{My Subtitle} % Optional
%                \idate{March 2004}
%                \irefnr{}
%                \iaddress{} % Only for ireports!
%                \makeititle
%                ... % The rest of the document
%
% LIMITATIONS: Currently only supports A4 paper size in a reasonable way.
%
% AUTHORS:     Elisabet Molin, Mats Bengtsson, S3, KTH, Paul Wintz
%
% DATE:         06/09/2024
%
% Updated:      060503 Support for ireport, lic and doktor /mabe
%               060807 Renamed to KTHEEtitlepage, added \submittedIEEE
%                      and \publishedIEEE /mabe
%               061006 Fixed problem if \subtitle wasn't set in
%                      ireport /mabe
%               061010 forPrint now gives B&W logo for ireport and
%                      the title page is now centered even if the
%                      remaining document isn't. Check if the babel
%                      package is used to select swedish. /mabe
%               060924 Deleted unneeded package options and macros related to Swedish and KTH. - Paul
%
%******************************************************************************
% Identification
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{hslTR}[2024-07-08 Hybrid Systems Laboratory Technical Report]


% define new booleans for options
\newif\if@colour
\newif\if@ireport

% Default options:
\@colourtrue

% declare options
\DeclareOption{forWWW}{\@colourtrue}
\DeclareOption{forPrint}{\@colourfalse}
\DeclareOption{ireport}{\@ireporttrue\@exjobbfalse\@licfalse\@doktorfalse}

\ProcessOptions\relax

% automatic graphics switching
\RequirePackage{graphicx,color} % for inserting the logos and
                                % the background

\RequirePackage{calc} % for the layout calculations

\newcommand\@ititle{}
\newcommand\@isubtitle{}
\newcommand\@iauthor{}
\newcommand\@idate{}
\newcommand\@iyear{}
\newcommand\@irefnr{}
\newcommand\@iaddress{}
\newcommand\@inotice{}

\newcommand{\ititle}[1]{%
  \renewcommand\@ititle{#1}%
}
\newcommand{\isubtitle}[1]{%
  \renewcommand\@isubtitle{#1}%
}
\newcommand{\iauthor}[1]{%
  \renewcommand\@iauthor{#1}%
}
\newcommand{\idate}[1]{%
  \renewcommand\@idate{#1}%
}
\newcommand{\iyear}[1]{%
  \renewcommand\@iyear{#1}%
}
\newcommand{\irefnr}[1]{%
  \renewcommand\@irefnr{#1}%
}
\newcommand{\iaddress}[1]{%
  \renewcommand\@iaddress{#1}%
}
\newcommand{\submittedIEEE}[1]{\renewcommand{\@inotice}{
    This work has been submitted to the IEEE for possible
    publication. Copyright may be transferred without notice, after
    which this version may no longer be accessible.}}
\newcommand{\publishedIEEE}[1]{\renewcommand{\@inotice}{
    \copyright{} #1 IEEE. Personal use of this material is
    permitted. However, permission to reprint/republish this material
    for advertising or promotional purposes or for creating new
    collective works for resale or redistribution to servers or lists,
    or to reuse any copyrighted component of this work in other works
    must be obtained from the IEEE.}}

% Page layout
% \geometry{left=25mm,right=66mm,top=30mm,bottom=28mm,marginparsep=12mm,includemp=false,noheadfoot}

\newlength{\titlep@getextwidth}
\setlength{\titlep@getextwidth}{12cm}
\newlength{\titlep@gewhitemargin}
\setlength{\titlep@gewhitemargin}{54mm}
\newlength{\titlep@geleftmargin}
\setlength{\titlep@geleftmargin}{27mm}
\newlength{\titlep@gemarginsep}
\setlength{\titlep@gemarginsep}{9mm}
\newlength{\titlep@getextheight}
\setlength{\titlep@getextheight}{240mm}
\newlength{\titlep@getopmargin}
\setlength{\titlep@getopmargin}{35mm}
\newlength{\tmpl@ngth}%

\def\makeititle{
  \thispagestyle{empty}
  \begingroup
    \if@twocolumn%
      \onecolumn%
      \m@keireportititle%
      \twocolumn%
    \else 
      \newpage%
      \global\@topnum\z@%
      \m@keireportititle%
    \fi
  \endgroup
  \setcounter{footnote}{0}
  \thispagestyle{empty}
  \setcounter{page}{0} \newpage\pagecolor{white}
}

% this is the new style for the title page of ireports
\newcommand\m@keireportititle{%
  \noindent\hspace*{-\tmpl@ngth}%
  \makebox[0pt][l]{\begin{minipage}[t][\textheight]{\linewidth}%
  \begin{center}
    \fontsize{20}{25}\selectfont\@ititle\\[5mm]
    \fontsize{10}{12}\selectfont\mbox{}\@isubtitle\\[5mm]
    \textit{\@inotice}\vfill
    \fontsize{14}{18}\selectfont\@iauthor
    \vfill\vfill\vfill
    \fontsize{14}{18}\selectfont%
    \@idate\\
    \rule{\linewidth}{1pt}
    Technical Report\\
    Hybrid Systems Laboratory\\
    Department of Electrical and Computer Engineering\\
    University of California, Santa Cruz\\[5mm]
    % \@iaddress\\[5mm]
  \end{center}
  \small{
  Technical Report No.\ TR-HSL-\@irefnr-\@iyear \hfill\\ Available at \href{https://hybrid.soe.ucsc.edu/sites/default/files/preprints/TR-HSL-\@irefnr-\@iyear.pdf}{hybrid.soe.ucsc.edu/sites/default/files/preprints/TR-HSL-\@irefnr-\@iyear.pdf} \\
  {\bfseries Readers must receive permission from the authors before reusing, modifying, publishing, or distributing any portion of this report.}

}
\end{minipage}}
}
