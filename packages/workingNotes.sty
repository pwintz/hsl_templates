

% \NeedsTeXFormat{LaTeX2e}
% \ProvidesPackage{workingnotes}
% [2024/01/21 Paul Wintz Configuration Package]

% \usepackage{ifthen}
% \newboolean{workingnotes@showInDraft}
% \setboolean{workingnotes@showInDraft}{true}
% \DeclareOption{inDraft}{\setboolean{workingnotes@showInDraft}{true}}

\usepackage{etoolbox}
\newbool{showInDraft}\booltrue{showInDraft}
\newbool{showWorkingNotes}\boolfalse{showWorkingNotes}

\definecolor{workingnote}{rgb}{0.73, 0.13, 0.73}

\usepackage{ifdraft}
\usepackage{environ}
\ifdraft{
    \ifbool{showInDraft}{
        \booltrue{showWorkingNotes}
    }{% 
    %     \boolfalse{showWorkingNotes}
    }
}{ 
    % \boolfalse{showWorkingNotes}
}

\ifbool{showWorkingNotes}{
    \newcommand{\workingnote}[1]{{\color{workingnote} #1}}

    % We use the default newenvironment to create workingnoteEnv instead of the environ package 
    % so that syntex links work within the environment.
    \newenvironment{workingnoteEnv}%
        {\colorlet{workingnotes@oldcolor}{.}\color{workingnote}\par}% Before environment
        {\color{workingnotes@oldcolor}\par}% After Environment
}{
    \newcommand{\workingnote}[1]{}

    % Use the environ package to create an environment that does not display its contents.
    \NewEnviron{workingnoteEnv}
}

% % Progress tracking
% \ifdraft{
%     \newcommand{\done}{\ensuremath{\checkmark}} % Variant: \surd
%     \newcommand{\undone}{\ensuremath{\square}}
%     \newcommand{\doneish}{\done-ish}
%     \newcommand{\citationneeded}{${}^{\color{darkred}\textup{\textsc{[Citation needed]}}}$}
%     \newcommand{\removebeforeflight}{${}^{\color{darkred}\textup{\textsc{[Remove before flight]}}}$}
%     \newcommand{\restorebeforeflight}[1]{${}^{\color{darkred}\textup{[\textsc{Restore before flight}: {#1}]}}$}
    
%     \ifbool{showInDraft}{
%         \newcommand{\checkbeforeflight}[1]{${}^{\color{darkred}\textup{[\textsc{Check before flight}: #1]}}$}
%     }{
%         \newcommand{\checkbeforeflight}[1]{}
%     }
% }{
%     \newcommand{\done}{}
%     \newcommand{\undone}{}
%     \newcommand{\doneish}{}

%     \newcommand{\citationneeded}{}
%     % \newcommand{\removebeforeflight}{${}^{\color{darkred}\textup{\textsc{[Remove before flight!!!!!!!!!!]}}}$}
%     % \newcommand{\restorebeforeflight}[1]{${}^{\color{darkred}\textup{[Restore before flight!!!!!!!: \textsc{#1}]}}$}
%     % \newcommand{\removebeforeflight}{\message{LaTeX Warning: Remove Before Flight command included in 'final' document.}}
%     % \newcommand{\restorebeforeflight}[1]{\message{LaTeX Warning: Restore Before Flight command included in 'final' document.}}
% }
